{% extends 'base.html.twig' %}

{% block title %}Hello AccueilController!
{% endblock %}
{% block search %}
<p>recherche</p>
{% endblock %}
{% block body %}

	{% for message in app.flashes('success') %}
        <div class="alert alert-success d-flex align-items-center" role="alert">
            <i class="bi bi-check-circle me-2 text-success"></i>
            <div class="text-success">
                {{ message }}
            </div>
        </div>
    {% endfor %}
    {% for message in app.flashes('error') %}
        <div class="alert alert-danger d-flex align-items-center" role="alert">
            <i class="bi bi-x-circle me-2 text-danger"></i>
            <div class="text-danger">
                {{ message }}
            </div>
        </div>
    {% endfor %}

	<div class="d-flex flex-row w-100 mb-5">
		<h5 class="fw-normal mb-3">

		</h5>
	</div>
	{% if is_granted('ROLE_ADMIN') %}
	<div class="d-flex flex-row w-100 mb-5">
		<h5 class="fw-normal mb-3">
			Statistique
		</h5>
	</div>

	<div class="d-flex flex-column w-100 mb-5">
		<h5 class="fw-normal mb-3">
			Liste des Utilisateurs
		</h5>
		<div class="table-responsive rounded-custom bg-white shadow-custom text-center">
			<table class="table table-hover table-borderless text-dark">
				<thead >
					<tr>
						<th scope="col" style="width: 54px;">Id</th>
						<th scope="col" style="width: 90px;">Photo</th>
						<th scope="col">Rôle</th>
						<th scope="col">Nom</th>
						<th scope="col">Prénom</th>
						<th scope="col">Téléphone</th>
						<th scope="col">Adresse</th>
						<th scope="col">Mail</th>
						<th scope="col" style="width: 90px;">Actions</th>
					</tr>
					<tr>
						<th scope="col" class="opacity-25">#</th>
						<th scope="col" class="opacity-25">#</th>
						<th scope="col" class="opacity-25">#</th>
						<th scope="col" class="opacity-25">#</th>
						<th scope="col" class="opacity-25">#</th>
						<th scope="col" class="opacity-25">#</th>
						<th scope="col" class="opacity-25">#</th>
						<th scope="col" class="opacity-25">#</th>
						<th scope="col"><i class="bi bi-plus-circle"></i></th>
					</tr>
				</thead>
				<tbody>
				{% for utilisateur in utilisateurs %}
					<tr class="align-middle">
						<td scope="row">#{{ utilisateur.id }}</td>
						<td><img src="https://avatars.dicebear.com/api/identicon/{{ utilisateur.nom }}.{{ utilisateur.prenom }}.svg" height="32" width="32" alt="..." class="border border-secondary border-2 rounded-2 bg-light"></td>
						<td>{{ utilisateur.role }}</td>
						<td>{{ utilisateur.nom }}</td>
						<td>{{ utilisateur.prenom }}</td>
						<td>{{ utilisateur.telephone }}</td>
						<td>{{ utilisateur.adresse }}</td>
						<td>{{ utilisateur.email }}</td>
						<td class="d-flex flex-row justify-content-evenly w-100"><a href="#"><i class="bi bi-pen"></i></a><a href="#"><i class="bi bi-trash text-danger"></i></a></td>
					</tr>
				{% endfor %}
				</tbody>
			</table>
		</div>
	</div>

	<div class="d-flex flex-column w-100mb-5">
		<h5 class="fw-normal mb-3">
			Liste des Clients
		</h5>
        <div class="table-responsive rounded-custom bg-white shadow-custom text-center">
			
			<table class="table table-hover table-borderless text-dark">
				<thead >
					<tr>
						<th scope="col" style="width: 54px;">Id</th>
						<th scope="col" style="width: 90px;">Photo</th>
						<th scope="col">Nom</th>
						<th scope="col">Prénom</th>
						<th scope="col">Téléphone</th>
						<th scope="col">Adresse</th>
						<th scope="col">Mail</th>
						<th scope="col" style="width: 90px;">Actions</th>
					</tr>
					<tr>
						<th scope="col" class="opacity-25">#</th>
						<th scope="col" class="opacity-25">#</th>
						<th scope="col" class="opacity-25">#</th>
						<th scope="col" class="opacity-25">#</th>
						<th scope="col" class="opacity-25">#</th>
						<th scope="col" class="opacity-25">#</th>
						<th scope="col" class="opacity-25">#</th>
						<th scope="col"><i class="bi bi-plus-circle"></i></th>
					</tr>
				</thead>
				<tbody>
				{% for client in clients %}
					<tr class="align-middle">
						<td scope="row">#{{ client.id }}</td>
						<td><img src="https://avatars.dicebear.com/api/identicon/{{ client.nom }}.{{ client.prenom }}.svg" height="32" width="32" alt="..." class="border border-secondary border-2 rounded-2 bg-light"></td>
						<td>{{ client.nom }}</td>
						<td>{{ client.prenom }}</td>
						<td>{{ client.telephone }}</td>
						<td>{{ client.adresse }}</td>
						<td>{{ client.mail }}</td>
						<td class="d-flex flex-row justify-content-evenly w-100"><a href="{{ path('client_edit', {'id': client.id}) }}"><i class="bi bi-pen"></i></a><a href="#"><i class="bi bi-trash text-danger"></i></a></td>
					</tr>
				{% endfor %}
				</tbody>
			</table>
		</div>
	</div>
	{% endif %}
{% endblock %}
